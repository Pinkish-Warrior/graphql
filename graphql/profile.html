<!DOCTYPE html>
<html>
  <head>
    <title>Profile Page</title>
  </head>
  <body>
    <h1>Profile Page</h1>
    <div id="user-info"></div>
    <div id="statistics"></div>
    <script>
      const jwt = localStorage.getItem("jwt");
      if (!jwt) {
        window.location.href = "login.html";
      }
      fetch("https://learn.01founders.co/api/graphql-engine/v1/graphql", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          Authorization: `Bearer ${jwt}`,
        },
        body: JSON.stringify({
          query: `
                    query {
                        user {
                            id
                            login
                            xp {
                                amount
                            }
                        }
                    }
                `,
        }),
      })
        .then((response) => response.json())
        .then((data) => {
          const userInfo = document.getElementById("user-info");
          userInfo.innerHTML = `
                <h2>User Information</h2>
                <p>ID: ${data.data.user.id}</p>
                <p>Login: ${data.data.user.login}</p>
                <p>XP: ${data.data.user.xp.amount}</p>
            `;
          const statistics = document.getElementById("statistics");
          statistics.innerHTML = `
                <h2>Statistics</h2>
                <div class="statistic">
                    <svg viewBox="0 0 100 100">
                        <!-- XP earned over time graph -->
                    </svg>
                    <p>XP Earned Over Time</p>
                </div>
                <div class="statistic">
                    <svg viewBox="0 0 100 100">
                        <!-- XP earned by project graph -->
                    </svg>
                    <p>XP Earned by Project</p>
                </div>
            `;
        })
        .catch((error) => {
          console.error(error);
        });
    </script>
  </body>
</html>
